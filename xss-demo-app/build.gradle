apply plugin: 'application'

mainClassName = "com.thoughtworks.appsec.xssDemo.GuestBookServerMain"
version = "1.0"

dependencies {
    testCompile 'org.fluentlenium:fluentlenium-core:0.10.3'
}

test {
    exclude "**/*UATest*"
    exclude "**/*IntTest*"
}

task intTest (type:Test, dependsOn: ['test']) {
    include '**/*IntTest.*'
}

task uaTest (type:Test, dependsOn: ['test', 'jar']) {
    include "**/*UATest*"
    doFirst {
        Process process = ext.process = new ProcessBuilder().command(
                "java", "-jar", "xss-demo-app/build/libs/xss-demo-app-1.0.jar").start()
    }
}

jar {
    manifest {
        attributes 'Main-Class': mainClassName
    }
    from { configurations.compile.collect { it.isDirectory() ? it : zipTree(it) } }
}